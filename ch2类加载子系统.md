## 二、类加载子系统。

### 1、类加载过程。

`加载（loading）` -> `链接（linking）（验证Verification -> 准备Preparation -> 解析Resolution）`-> `初始化（initialization）`。

#### loading阶段

通过全限定类名获取此类的二进制字节流  -> 将其代表的静态结构转为方法区的运行时数据结构 -> 在内存中生成一个代表这个类的java.lang.Class对象，作为方法区这个类的各种数据的访问入口。

#### linking阶段
1）验证，确保Class文件的字节流中包含的信息符合当前虚拟机要求，保证被加载类的正确性。包括四种验证：文件格式验证，元数据验证，字节码验证，符号引用验证。
2）准备。
- 为类变量（static）分配内存并且设置该类变量的默认初始值，即零值。
- 这里不包含用final修饰的static，因为final的值在编译的时候就会被分配，准备阶段会显示初始化。
- 不会为实例变量分配初始化，类变量会分配在方法区，而实例变量是会随着对象一起分配到Java堆中。
3）解析。将常量池内的符号引用转换为直接引用的过程。事实上，解析操作往往会伴随着JVM在执行完初始化之后再执行。...
#### initialization阶段
1） 初始化阶段就是执行类的构造器方法`<clinit>()`的过程，此方法不需要定义，是javac编译器自动收集类中的所有*类*变量的赋值动作和静态代码块中的语句合并而来。并且，其中的指令按语句在源文件中出现的顺序执行。
